<!DOCTYPE html>
<html lang="en" data-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="A simple starter template Vue JS 3 Tailwind and any other tools"
    />
    <!-- Fontawesome -->
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.15.4/css/all.css"
      integrity="sha384-DyZ88mC6Up2uqS4h/KRgHuoeGwBcD4Ng9SiP4dIRy0EXTlnuz47vAwmeGwVChigm"
      crossorigin="anonymous"
    />

    <title>Vue Tailwind Template</title>

    <link
      href="https://cdn.jsdelivr.net/npm/daisyui@2.38.0/dist/full.css"
      rel="stylesheet"
      type="text/css"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" type="text/css" href="styles.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.bundle.js"></script>
    <link
      href="https://fonts.googleapis.com/css?family=Red+Hat+Text:400,500&display=swap"
      rel="stylesheet"
    />
  </head>
  <body class="bg-base-300">
    <div
      class="
        max-w-screen-xl
        mx-autorounded-x-xl
        sm:flex
        flex-row-reverse
        round-xl
        bg-base-200
        rounded-xl
        mx-auto
        gap-1
      "
    >
      <div class="sm:w-full sm:p-12">
        <canvas id="btcChart" class="h-max p-4"></canvas>
        
        <div class="flex space-x-2">

          <div class="text-center border border-base-100 p-5 w-max rounded-lg text-gray-300/40">
            <p class="text-2xl font-bold">123.212</p>
            <p>HIGHER</p>
          </div>
          <div class="text-center border border-base-100 p-5 w-max rounded-lg text-gray-300/40">
          <p class="text-2xl font-bold">123.212</p>
          <p>LOWER</p>
        </div>
        </div>
      </div>
      <div class="sm:w-[400px] bg-base-100 p-5 space-y-5 py-12">
        <div>
          current price
          <h2
            class="text-4xl py-2 font-bold text-warning mb-2"
            id="btcPrice"
          ></h2>
        </div>

        <div>
          Bet Ammount
          <div class="bg-base-300 items-center rounded-lg p-1 space-y-1">
            <div class="flex items-center justify-between space-x-1">
              <input
                type="text"
                placeholder="Ammount"
                class="input w-full bg-transparent"
              /><svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                width="24"
                height="24"
                class="fill-white"
              >
                <path fill="none" d="M0 0h24v24H0z" />
                <path
                  d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"
                />
              </svg>
              <div class="btn btn-square bg-base-100">/2</div>
              <div class="btn btn-square bg-base-100">2x</div>
            </div>
            <div
              class="grid gap-1 grid-cols-6 rounded-lg bg-base-300 text-center"
            >
              <div class="px-2 text-sm py-2 bg-base-200/50 my-1">+10</div>
              <div class="px-2 text-sm py-2 bg-base-200/50 my-1">+50</div>
              <div class="px-2 text-sm py-2 bg-base-200/50 my-1">+100</div>
              <div class="px-2 text-sm py-2 bg-base-200/50 my-1">+250</div>
              <div class="px-2 text-sm py-2 bg-base-200/50 my-1">+500</div>
              <div class="px-2 text-sm py-2 bg-base-200/50 my-1">$</div>
            </div>
          </div>
        </div>

        <div class="flex gap-1">
          <input
            type="text"
            placeholder="BTC-COIN "
            class="input w-1/2 disable bg-base-200"
          /><select class="select w-1/2 bg-base-200">
            <option disabled selected>1 Menit</option>
            <option>15 Menit</option>
            <option>30 Menit</option>
          </select>
        </div>

        <div class="grid gap-1 grid-cols-2 rounded-lg space-x-1">
          <div
            class="
              text-center
              bg-accent
              rounded-lg
              bg-cover
              text-white
              uppercase
              grid
              font-bold
              h-24
              items-center
              py-3
            "
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              width="24"
              height="24"
              class="mx-auto fill-white"
            >
              <path fill="none" d="M0 0h24v24H0z" />
              <path
                d="M12 2c5.52 0 10 4.48 10 10s-4.48 10-10 10S2 17.52 2 12 6.48 2 12 2zm1 10h3l-4-4-4 4h3v4h2v-4z"
              />
            </svg>
            <p>HIGHER</p>
          </div>
          <div
            class="
              text-center
              bg-secondary
              rounded-lg
              bg-cover
              text-white
              uppercase
              grid
              font-bold
              h-24
              items-center
              py-3
            "
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              width="24"
              height="24"
              class="mx-auto fill-white"
            >
              <path fill="none" d="M0 0h24v24H0z" />
              <path
                d="M12 2c5.52 0 10 4.48 10 10s-4.48 10-10 10S2 17.52 2 12 6.48 2 12 2zm1 10V8h-2v4H8l4 4 4-4h-3z"
              />
            </svg>
            <p>LOWER</p>
          </div>
        </div>
      </div>
    </div>
  </body>

  <script>
    ///  Calling API and modeling data for each chart ///
    const btcData = async () => {
      const response = await fetch(
        'https://min-api.cryptocompare.com/data/v2/histominute?fsym=BTC&tsym=USD&limit=119&api_key=0646cc7b8a4d4b54926c74e0b20253b57fd4ee406df79b3d57d5439874960146'
      );
      const json = await response.json();
      const data = json.Data.Data;
      const times = data.map((obj) => obj.time);
      const prices = data.map((obj) => obj.high);
      return {
        times,
        prices,
      };
    };

    /// Error handling ///
    function checkStatus(response) {
      if (response.ok) {
        return Promise.resolve(response);
      } else {
        return Promise.reject(new Error(response.statusText));
      }
    }

    /// Charts ///
    let createBtcChart;

    async function printBtcChart() {
      let { times, prices } = await btcData();

      let btcChart = document.getElementById('btcChart').getContext('2d');

      let gradient = btcChart.createLinearGradient(0, 0, 0, 400);

      gradient.addColorStop(0, 'rgba(247,147,26,.5)');
      gradient.addColorStop(0.425, 'rgba(255,193,119,0)');

      Chart.defaults.global.defaultFontFamily = 'Red Hat Text';
      Chart.defaults.global.defaultFontSize = 12;

      createBtcChart = new Chart(btcChart, {
        type: 'line',
        data: {
          labels: times,
          datasets: [
            {
              label: '$',
              data: prices,
              backgroundColor: gradient,
              borderColor: 'rgb(247, 26, 155)',
              borderJoinStyle: 'round',
              borderCapStyle: 'round',
              borderWidth: 3,
              pointRadius: 0,
              pointHitRadius: 0,
              lineTension: 0,
            },
          ],
        },

        options: {
          title: {
            display: false,
            text: 'Heckin Chart!',
            fontSize: 35,
          },

          legend: {
            display: false,
          },

          layout: {
            padding: {
              left: 0,
              right: 0,
              top: 0,
              bottom: 0,
            },
          },

          scales: {
            xAxes: [
              {
                display: false,
                gridLines: {},
              },
            ],
            yAxes: [
              {
                display: true,
                gridLines: {},
              },
            ],
          },

          tooltips: {
            callbacks: {
              //This removes the tooltip title
              title: function () {},
            },
            //this removes legend color
            displayColors: false,
            yPadding: 10,
            xPadding: 10,
            position: 'nearest',
            caretSize: 10,
            backgroundColor: 'rgba(255,255,255,.9)',
            bodyFontSize: 15,
            bodyFontColor: '#303030',
          },
        },
      });
    }

    /// Update current price ///

    async function updateBitcoinPrice() {
      let { times, prices } = await btcData();
      let currentPrice = prices[prices.length - 1].toFixed(2);

      document.getElementById('btcPrice').innerHTML = '$' + currentPrice;
    }

    updateBitcoinPrice();

    printBtcChart();
  </script>
</html>
